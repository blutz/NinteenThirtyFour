{"version":3,"file":"cost-calculator/view.js","mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,oBAAoB,GAAG;EACzBC,QAAQ,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;EAClEC,UAAU,EAAE;AAChB,CAAC;AAED,SAASC,IAAIA,CAACC,SAAS,EAAE;EACvB,SAASC,gBAAgBA,CAACC,MAAM,EAAEC,aAAa,EAAE;IAC/C,MAAMC,UAAU,GAAGR,oBAAoB;IACvC,IAAIS,WAAW;IACfC,OAAO,CAACC,GAAG,CAACL,MAAM,EAAEC,aAAa,CAAC;IAClC,IAAGA,aAAa,IAAIC,UAAU,CAACP,QAAQ,CAACW,MAAM,EAAE;MAC9CH,WAAW,GAAGD,UAAU,CAACP,QAAQ,CAACM,aAAa,GAAC,CAAC,CAAC;IACpD,CAAC,MAAM;MACL,MAAMM,WAAW,GAAGN,aAAa,GAAGC,UAAU,CAACP,QAAQ,CAACW,MAAM;MAC9DH,WAAW,GAAGD,UAAU,CAACP,QAAQ,CAACO,UAAU,CAACP,QAAQ,CAACW,MAAM,GAAC,CAAC,CAAC,GAAIC,WAAW,GAAGL,UAAU,CAACN,UAAW;IACzG;IACA,OAAOI,MAAM,IAAIG,WAAW;EAC9B;EAEA,SAASK,YAAYA,CAAA,EAAG;IACtB,KAAK,MAAMC,IAAI,IAAIX,SAAS,CAACY,gBAAgB,CAAC,aAAa,CAAC,EAAE;MAC5DD,IAAI,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;IAC7B;EACF;EAEA,SAASC,QAAQA,CAACJ,IAAI,EAAE;IACtBD,YAAY,CAAC,CAAC;IACd,MAAMM,MAAM,GAAGhB,SAAS,CAACiB,aAAa,CAAE,eAAcN,IAAK,IAAG,CAAC;IAC/D,IAAG,CAACK,MAAM,EAAE;MACVD,QAAQ,CAAC,OAAO,CAAC;MACjB;IACF;IACAC,MAAM,CAACH,KAAK,CAACC,OAAO,GAAG,EAAE;IACzB,MAAMI,eAAe,GAAGF,MAAM,CAACC,aAAa,CAAC,4BAA4B,CAAC;IAC1E,MAAME,SAAS,GAAGH,MAAM,CAACC,aAAa,CAAC,eAAe,CAAC;IACvD,MAAMG,QAAQ,GAAGJ,MAAM,CAACC,aAAa,CAAC,cAAc,CAAC;IACrD,IAAGC,eAAe,EAAE;MAClBA,eAAe,CAACG,OAAO,GAAG,MAAMN,QAAQ,CAAC,OAAO,CAAC;IACnD;IACA,QAAOJ,IAAI;MACT,KAAK,OAAO;QACVK,MAAM,CAACC,aAAa,CAAC,QAAQ,CAAC,CAACI,OAAO,GAAG,MAAMN,QAAQ,CAAC,QAAQ,CAAC;QACjE;MACF,KAAK,QAAQ;QACXI,SAAS,CAACE,OAAO,GAAG,MAAMN,QAAQ,CAAC,cAAc,CAAC;QAClDK,QAAQ,CAACC,OAAO,GAAG,MAAMN,QAAQ,CAAC,QAAQ,CAAC;QAC3C;MACF,KAAK,QAAQ;QACXI,SAAS,CAACE,OAAO,GAAG,MAAMN,QAAQ,CAAC,QAAQ,CAAC;QAC5CK,QAAQ,CAACC,OAAO,GAAG,MAAMN,QAAQ,CAAC,cAAc,CAAC;QACjD;MACF,KAAK,cAAc;QACjBC,MAAM,CAACC,aAAa,CAAC,QAAQ,CAAC,CAACI,OAAO,GAAG,MAAMN,QAAQ,CAAC,QAAQ,CAAC;QACjE;MACF,KAAK,QAAQ;QACXI,SAAS,CAACE,OAAO,GAAG,MAAMN,QAAQ,CAAC,eAAe,CAAC;QACnDK,QAAQ,CAACC,OAAO,GAAG,MAAMN,QAAQ,CAAC,SAAS,CAAC;QAC5C;MACF,KAAK,SAAS;QACZI,SAAS,CAACE,OAAO,GAAG,MAAMN,QAAQ,CAAC,eAAe,CAAC;QACnDK,QAAQ,CAACC,OAAO,GAAG,MAAMN,QAAQ,CAAC,QAAQ,CAAC;QAC3C;MACF,KAAK,QAAQ;QACXC,MAAM,CAACC,aAAa,CAAC,MAAM,CAAC,CAACK,QAAQ,GAAIC,CAAC,IAAK;UAC7CA,CAAC,CAACC,cAAc,CAAC,CAAC;UAClB,MAAMC,KAAK,GAAGF,CAAC,CAACG,MAAM,CAACC,cAAc,CAAC,CAAC;UACvC,IAAG,CAACF,KAAK,EAAE;YACTT,MAAM,CAACC,aAAa,CAAC,QAAQ,CAAC,CAACJ,KAAK,CAACC,OAAO,GAAG,EAAE;UACnD,CAAC,MAAM;YACL,MAAMZ,MAAM,GAAG0B,QAAQ,CAACZ,MAAM,CAACC,aAAa,CAAC,iBAAiB,CAAC,CAACY,KAAK,CAAC;YACtE,MAAM1B,aAAa,GAAGyB,QAAQ,CAACZ,MAAM,CAACC,aAAa,CAAC,yBAAyB,CAAC,CAACY,KAAK,CAAC;YACrF,IAAG5B,gBAAgB,CAACC,MAAM,EAAEC,aAAa,CAAC,EAAE;cAC1CY,QAAQ,CAAC,eAAe,CAAC;YAC3B,CAAC,MAAM;cACLA,QAAQ,CAAC,kBAAkB,CAAC;YAC9B;UACF;QACF,CAAC;QACD;IAEJ;EACF;EAEAA,QAAQ,CAAC,OAAO,CAAC;AACnB;AAEAe,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EAClDD,QAAQ,CAAClB,gBAAgB,CAAC,mCAAmC,CAAC,CAACoB,OAAO,CAACC,EAAE,IAAIlC,IAAI,CAACkC,EAAE,CAAC,CAAC;AACxF,CAAC,CAAC,C","sources":["webpack://unicamp-blocks/./src/cost-calculator/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end \n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any \n * JavaScript running in the front-end, then you should delete this file and remove \n * the `viewScript` property from `block.json`. \n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nconst incomeGuidelines2023 = {\n    brackets: [25142, 33874, 42606, 51338, 60070, 68802, 77534, 86266],\n    additional: 8732,\n}\n\nfunction init(container) {\n  function isIncomeEligible(income, householdSize) {\n    const guidelines = incomeGuidelines2023\n    let incomeLimit\n    console.log(income, householdSize)\n    if(householdSize <= guidelines.brackets.length) {\n      incomeLimit = guidelines.brackets[householdSize-1]\n    } else {\n      const extraPeople = householdSize - guidelines.brackets.length\n      incomeLimit = guidelines.brackets[guidelines.brackets.length-1] + (extraPeople * guidelines.additional)\n    }\n    return income <= incomeLimit\n  }\n\n  function hideAllSteps() {\n    for (const step of container.querySelectorAll('[data-step]')) {\n      step.style.display = 'none'\n    }\n  }\n\n  function initStep(step) {\n    hideAllSteps()\n    const stepEl = container.querySelector(`[data-step=\"${step}\"]`)\n    if(!stepEl) {\n      initStep('error')\n      return\n    }\n    stepEl.style.display = ''\n    const startOverButton = stepEl.querySelector('[data-action=\"start-over\"]')\n    const yesButton = stepEl.querySelector('[value=\"yes\"]')\n    const noButton = stepEl.querySelector('[value=\"no\"]')\n    if(startOverButton) {\n      startOverButton.onclick = () => initStep('intro')\n    }\n    switch(step) {\n      case 'intro':\n        stepEl.querySelector('button').onclick = () => initStep('dcfs-1')\n        break\n      case 'dcfs-1':\n        yesButton.onclick = () => initStep('dcfs-qualify')\n        noButton.onclick = () => initStep('foster')\n        break\n      case 'dcfs-2':\n        yesButton.onclick = () => initStep('foster')\n        noButton.onclick = () => initStep('dcfs-qualify')\n        break\n      case 'dcfs-qualify':\n        stepEl.querySelector('button').onclick = () => initStep('foster')\n        break\n      case 'foster':\n        yesButton.onclick = () => initStep('final-qualify')\n        noButton.onclick = () => initStep('program')\n        break\n      case 'program':\n        yesButton.onclick = () => initStep('final-qualify')\n        noButton.onclick = () => initStep('income')\n        break\n      case 'income':\n        stepEl.querySelector('form').onsubmit = (e) => {\n          e.preventDefault()\n          const valid = e.target.reportValidity()\n          if(!valid) {\n            stepEl.querySelector('.error').style.display = ''\n          } else {\n            const income = parseInt(stepEl.querySelector('[name=\"income\"]').value)\n            const householdSize = parseInt(stepEl.querySelector('[name=\"household-size\"]').value)\n            if(isIncomeEligible(income, householdSize)) {\n              initStep('final-qualify')\n            } else {\n              initStep('final-no-qualify')\n            }\n          }\n        }\n        break\n\n    }\n  }\n\n  initStep('intro')\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  document.querySelectorAll('.wp-block-unicamp-cost-calculator').forEach(el => init(el))\n})\n"],"names":["incomeGuidelines2023","brackets","additional","init","container","isIncomeEligible","income","householdSize","guidelines","incomeLimit","console","log","length","extraPeople","hideAllSteps","step","querySelectorAll","style","display","initStep","stepEl","querySelector","startOverButton","yesButton","noButton","onclick","onsubmit","e","preventDefault","valid","target","reportValidity","parseInt","value","document","addEventListener","forEach","el"],"sourceRoot":""}