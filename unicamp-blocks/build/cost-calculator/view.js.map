{"version":3,"file":"cost-calculator/view.js","mappings":"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","sources":["webpack://unicamp-blocks/./src/cost-calculator/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end \n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any \n * JavaScript running in the front-end, then you should delete this file and remove \n * the `viewScript` property from `block.json`. \n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nconst INCOME_BRACKETS = {\n  LOW: 'LOW',\n  MEDIUM: 'MEDIUM',\n  HIGH: 'HIGH',\n}\n\n// https://www.hcd.ca.gov/sites/default/files/docs/grants-and-funding/income-limits-2023.pdf\nconst INCOME_GUIDELINES_2024 = {\n  // If the family males LESS than the low amount, they qualify\n  low: {\n    brackets: [26500, 30300, 34100, 37850, 40900, 43950, 46950, 50560],\n    additional: 3028, // 8% of the 4-person limit\n  },\n  // If the family makes LESS THAN OR EQUAL TO this amount them they qualify\n  medium: {\n    brackets: [103120,117870,132560,147310,159120,170870,182680,194430],\n    additional: 11784, // 8% of the 4-person limit\n  },\n}\n\nfunction init(container) {\n  function isEligibleForBracket(guidelines, income, householdSize, lessThanOrEqual = false) {\n    let incomeLimit\n    if(householdSize <= guidelines.brackets.length) {\n      incomeLimit = guidelines.brackets[householdSize-1]\n    } else {\n      const extraPeople = householdSize - guidelines.brackets.length\n      incomeLimit = guidelines.brackets[guidelines.brackets.length-1] + (extraPeople * guidelines.additional)\n    }\n    if(lessThanOrEqual) {\n      return income <= incomeLimit\n    } else {\n      return income < incomeLimit\n    }\n  }\n  function getIncomeBracket(income, householdSize) {\n    if(isEligibleForBracket(INCOME_GUIDELINES_2024.low, income, householdSize, false)) {\n      return INCOME_BRACKETS.LOW\n    }\n    if(isEligibleForBracket(INCOME_GUIDELINES_2024.medium, income, householdSize, true)) {\n      return INCOME_BRACKETS.MEDIUM\n    }\n    return INCOME_BRACKETS.HIGH\n  }\n\n  function hideAllSteps() {\n    for (const step of container.querySelectorAll('[data-step]')) {\n      step.style.display = 'none'\n    }\n  }\n\n  function initStep(step) {\n    hideAllSteps()\n    const stepEl = container.querySelector(`[data-step=\"${step}\"]`)\n    if(!stepEl) {\n      initStep('error')\n      return\n    }\n    stepEl.style.display = ''\n    const startOverButton = stepEl.querySelector('[data-action=\"start-over\"]')\n    const yesButton = stepEl.querySelector('[value=\"yes\"]')\n    const noButton = stepEl.querySelector('[value=\"no\"]')\n    if(startOverButton) {\n      startOverButton.onclick = () => initStep('intro')\n    }\n    switch(step) {\n      case 'intro':\n        stepEl.querySelector('button').onclick = () => initStep('dcfs-1')\n        break\n      case 'dcfs-1':\n        yesButton.onclick = () => initStep('dcfs-qualify')\n        noButton.onclick = () => initStep('foster')\n        break\n      case 'dcfs-2':\n        yesButton.onclick = () => initStep('foster')\n        noButton.onclick = () => initStep('dcfs-qualify')\n        break\n      case 'dcfs-qualify':\n        stepEl.querySelector('button').onclick = () => initStep('foster')\n        break\n      case 'foster':\n        yesButton.onclick = () => initStep('final-low')\n        noButton.onclick = () => initStep('program')\n        break\n      case 'program':\n        yesButton.onclick = () => initStep('final-low')\n        noButton.onclick = () => initStep('income')\n        break\n      case 'income':\n        stepEl.querySelector('form').onsubmit = (e) => {\n          e.preventDefault()\n          const valid = e.target.reportValidity()\n          if(!valid) {\n            stepEl.querySelector('.error').style.display = ''\n          } else {\n            const income = parseInt(stepEl.querySelector('[name=\"income\"]').value)\n            const householdSizeChildren = parseInt(stepEl.querySelector('[name=\"household-size-children\"]').value)\n            const householdSizeAdults = parseInt(stepEl.querySelector('[name=\"household-size-adults\"]').value)\n            const householdSize = householdSizeChildren + householdSizeAdults\n            const incomeBracket = getIncomeBracket(income, householdSize)\n            switch(incomeBracket) {\n              case INCOME_BRACKETS.LOW:\n                initStep('final-low')\n                break\n              case INCOME_BRACKETS.MEDIUM:\n                initStep('final-medium')\n                break\n              default:\n                initStep('final-high')\n            }\n          }\n        }\n        break\n\n    }\n  }\n\n  initStep('intro')\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  document.querySelectorAll('.wp-block-unicamp-cost-calculator').forEach(el => init(el))\n})\n"],"names":["INCOME_BRACKETS","LOW","MEDIUM","HIGH","INCOME_GUIDELINES_2024","low","brackets","additional","medium","init","container","isEligibleForBracket","guidelines","income","householdSize","lessThanOrEqual","incomeLimit","length","extraPeople","getIncomeBracket","hideAllSteps","step","querySelectorAll","style","display","initStep","stepEl","querySelector","startOverButton","yesButton","noButton","onclick","onsubmit","e","preventDefault","valid","target","reportValidity","parseInt","value","householdSizeChildren","householdSizeAdults","incomeBracket","document","addEventListener","forEach","el"],"sourceRoot":""}