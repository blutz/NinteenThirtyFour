{"version":3,"file":"hashtabs/view.js","mappings":"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","sources":["webpack://unicamp-blocks/./src/hashtabs/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nconst SELECTED_TAB_CLASSNAME = 'wp-block-unicamp-unicamp-blocks-hashtabs__tabs__tab--selected'\n\n// Tabs can't be added/removed dynamically, so doing this once per pageload is fine\nfunction setupBlock(container) {\n  // Setup\n  const slugs = []\n  container.querySelectorAll('.wp-block-unicamp-unicamp-blocks-hashtabs__tabs__tab')\n    .forEach(el => slugs.push(el.dataset.slug ? el.dataset.slug.toLowerCase().trim() : ''))\n  if(!slugs.length) { return }\n  const tabContainers = container.querySelectorAll('.wp-block-unicamp-unicamp-blocks-hashtab')\n  const tabs = container.querySelectorAll('.wp-block-unicamp-unicamp-blocks-hashtabs__tabs__tab')\n  const tabsContainer = container.querySelector('.wp-block-unicamp-unicamp-blocks-hashtabs__tabs')\n\n  // Click events on tabs\n  tabs.forEach(tab => tab.addEventListener('click', () => {\n    if(tab.dataset.slug) { window.location = `#${tab.dataset.slug}` }\n  }))\n\n  function selectTab(tabId) {\n    tabs.forEach(tab => tab.classList.remove(SELECTED_TAB_CLASSNAME))\n    tabs[tabId].classList.add(SELECTED_TAB_CLASSNAME)\n    tabContainers.forEach(el => el.style.display = 'none')\n    tabContainers[tabId].style.display = 'block'\n    history.replaceState({}, '', `#${slugs[tabId]}`)\n    tabsContainer.scrollTo({\n      left: tabs[tabId].offsetLeft + (tabs[tabId].clientWidth/2) - (tabsContainer.clientWidth/2),\n      behavior: 'smooth',\n    })\n  }\n\n  // Returns tab ID if we have a slug that matches the input hash, otherwise -1\n  function getTabIdByHash(hashInput='') {\n    let hash = (hashInput[0] === '#') ? hashInput.substring(1).toLowerCase() : hashInput\n    if(!hash.trim().length) { return -1 }\n    return slugs.indexOf(hash)\n  }\n\n  const startingTab = getTabIdByHash(window.location.hash)\n  if(startingTab >= 0) { selectTab(startingTab) } else { selectTab(0) }\n\n  window.addEventListener(\"hashchange\", () => {\n    const newTab = getTabIdByHash(window.location.hash)\n    if(newTab >= 0) { selectTab(newTab) }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  document.querySelectorAll('.wp-block-unicamp-unicamp-blocks-hashtabs').forEach(setupBlock)\n})\n"],"names":["SELECTED_TAB_CLASSNAME","setupBlock","container","slugs","querySelectorAll","forEach","el","push","dataset","slug","toLowerCase","trim","length","tabContainers","tabs","tabsContainer","querySelector","tab","addEventListener","window","location","selectTab","tabId","classList","remove","add","style","display","history","replaceState","scrollTo","left","offsetLeft","clientWidth","behavior","getTabIdByHash","hashInput","hash","substring","indexOf","startingTab","newTab","document"],"sourceRoot":""}