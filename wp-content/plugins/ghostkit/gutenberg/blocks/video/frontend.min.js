!function(){"use strict";const{GHOSTKIT:e,jQuery:t}=window,o=t(document);function i(){t(".ghostkit-video-fullscreen:visible .ghostkit-video-fullscreen-frame").each((function(){const e=t(this),o=e.data("ghostkit-video-aspect-ratio")||16/9;let i,n;o>window.innerWidth/window.innerHeight?(i=.9*window.innerWidth,n=i/o):(n=.9*window.innerHeight,i=n*o),e.css({width:i,height:n,top:(window.innerHeight-n)/2,left:(window.innerWidth-i)/2})}))}const n=function(e,t,o){var i,n=o||{},a=n.noTrailing,s=void 0!==a&&a,l=n.noLeading,d=void 0!==l&&l,r=n.debounceMode,c=void 0===r?void 0:r,v=!1,u=0;function g(){i&&clearTimeout(i)}function h(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];var l=this,r=Date.now()-u;function h(){u=Date.now(),t.apply(l,n)}function p(){i=void 0}v||(d||!c||i||h(),g(),void 0===c&&r>e?d?(u=Date.now(),s||(i=setTimeout(c?p:h,e))):h():!0!==s&&(i=setTimeout(c?p:h,void 0===c?e-r:e)))}return h.cancel=function(e){var t=(e||{}).upcomingOnly,o=void 0!==t&&t;g(),v=!o},h}(200,(a=()=>{i()},s=[],l=null,d=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];s=t,l||(l=requestAnimationFrame((function(){l=null,a.apply(void 0,s)})))},d.cancel=function(){l&&(cancelAnimationFrame(l),l=null)},d));var a,s,l,d;t(window).on("DOMContentLoaded load resize orientationchange",(()=>{n()})),o.on("initBlocks.ghostkit",((o,n)=>{void 0!==window.VideoWorker&&(e.triggerEvent("beforePrepareVideo",n),t(".ghostkit-video:not(.ghostkit-video-ready)").each((function(){const e=t(this).addClass("ghostkit-video-ready"),o=e.attr("data-video"),n=e.attr("data-click-action"),a="true"===e.attr("data-video-autoplay"),s="true"===e.attr("data-video-autopause"),l="true"===e.attr("data-video-loop");let d=e.find(".ghostkit-video-fullscreen-close-icon");d=d.length?d.html():e.attr("data-fullscreen-action-close-icon")?'<span class="'.concat(e.attr("data-fullscreen-action-close-icon"),'"></span>'):"";const r=e.attr("data-fullscreen-background-color");let c=e.find(".ghostkit-video-poster"),v=!1,u=!1,g=0,h=e.attr("data-video-aspect-ratio");h=h&&h.split(":")[0]&&h.split(":")[1]?h.split(":")[0]/h.split(":")[1]:16/9,parseFloat(e.attr("data-video-volume"))||(g=1),a&&(g=1);const p=new window.VideoWorker(o,{autoplay:0,loop:l,mute:g,volume:parseFloat(e.attr("data-video-volume"))||0,showContols:1});if(p&&p.isValid()){let o=0,l=0,g=!1;e.on("click",(()=>{l||(l=1,"fullscreen"===n?o?v&&(e.removeClass("ghostkit-video-fullscreen-closed"),v.fadeIn(200),p.play()):(e.addClass("ghostkit-video-loading"),p.getIframe((o=>{u=t(o);const n=u.parent();v=t('<div class="ghostkit-video-fullscreen" style="background-color: '.concat(r,';">')).appendTo("body").append(t('<div class="ghostkit-video-fullscreen-close">'.concat(d,"</div>"))).append(t('<div class="ghostkit-video-fullscreen-frame">').append(u)),v.data("ghostkit-video-aspect-ratio",h),n.remove(),v.fadeIn(200),v.on("click",(o=>{const i=t(o.target);(i.hasClass("ghostkit-video-fullscreen")||i.hasClass("ghostkit-video-fullscreen-close")||i.closest(".ghostkit-video-fullscreen-close").length)&&(p.pause(),v.fadeOut(200),e.addClass("ghostkit-video-fullscreen-closed"))})),i()})),o=1):o?p.play():(e.addClass("ghostkit-video-loading"),p.getIframe((o=>{u=t(o);const i=u.parent();t('<div class="ghostkit-video-frame">').appendTo(e).append(u),i.remove()})),o=1))})),c.length||e.hasClass("is-style-icon-only")||p.getImageURL((o=>{c=t('<div class="ghostkit-video-poster"><img src="'.concat(o,'" alt=""></div>')),e.append(c)}));let f=!1;if(p.on("ready",(()=>{e.removeClass("ghostkit-video-loading"),"fullscreen"===n?e.hasClass("ghostkit-video-fullscreen-closed")||p.play():(e.addClass("ghostkit-video-playing"),p.play())})),p.on("play",(()=>{g=!0})),p.on("pause",(()=>{g=!1,f=!0,"fullscreen"===n&&(l=0)})),"fullscreen"!==n&&(a||s)){if(!("IntersectionObserver"in window))return;new IntersectionObserver((t=>{t.forEach((t=>{e[0]===t.target&&(!f&&!g&&a&&t.isIntersecting&&(l?p.play():e.click()),g&&s&&!t.isIntersecting&&p.pause())}))}),{threshold:.6}).observe(e[0])}}})),e.triggerEvent("afterPrepareVideo",n))}))}();